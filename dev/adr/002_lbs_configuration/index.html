
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-7.3.6">
    
    
      
        <title>002. LoRa Basic Station configuration endpoint implementation - IoTEdge LoRaWAN StarterKit - documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.a57b2b03.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.css">
    
    
      


    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
      <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#002-lora-basic-station-configuration-endpoint-implementation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="IoTEdge LoRaWAN StarterKit - documentation" class="md-header__button md-logo" aria-label="IoTEdge LoRaWAN StarterKit - documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            IoTEdge LoRaWAN StarterKit - documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              002. LoRa Basic Station configuration endpoint implementation
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/Azure/iotedge-lorawan-starterkit/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../quickstart/" class="md-tabs__link">
      Quick Start
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../user-guide/devguide/" class="md-tabs__link">
        User Guide
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../samples/arduino/" class="md-tabs__link">
        Samples
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../testing/e2e_tests/" class="md-tabs__link">
        Testing
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../tools/device-provisioning/" class="md-tabs__link">
        Tools
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../001_region_cn470_implementation/" class="md-tabs__link md-tabs__link--active">
        Decision Log
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../issues/" class="md-tabs__link">
        About
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="IoTEdge LoRaWAN StarterKit - documentation" class="md-nav__button md-logo" aria-label="IoTEdge LoRaWAN StarterKit - documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    IoTEdge LoRaWAN StarterKit - documentation
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/Azure/iotedge-lorawan-starterkit/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../quickstart/" class="md-nav__link">
        Quick Start
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          User Guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="User Guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          User Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/devguide/" class="md-nav__link">
        Developer Guidance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/architecture/" class="md-nav__link">
        Architecture and Concepts for the LoRaWAN starter kit
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/message-flows/" class="md-nav__link">
        Message Flows
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/partner/" class="md-nav__link">
        Device Manufacturer Guidance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/caching/" class="md-nav__link">
        Caching
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/station-configuration/" class="md-nav__link">
        Basics Station configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/station-credential-management/" class="md-nav__link">
        Basics Station credentials management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/station-module-configuration/" class="md-nav__link">
        Basics Station IoT Edge Module configuration parameters
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/upgrade/" class="md-nav__link">
        Upgrade LoRaWAN to a new version
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/documentation/" class="md-nav__link">
        Working with the documentation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Samples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Samples" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Samples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../samples/arduino/" class="md-nav__link">
        Arduino Demo Code
      </a>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" type="checkbox" id="__nav_4_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_2">
          Decoders
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Decoders" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          Decoders
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../samples/decoders/decoder/" class="md-nav__link">
        Decoder
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../samples/decoders/universal/" class="md-nav__link">
        Universal Decoder
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../samples/decoders/cayenne/" class="md-nav__link">
        Cayenne Decoder
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Testing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Testing" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Testing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../testing/e2e_tests/" class="md-nav__link">
        E2E Tests
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../testing/integration_tests/" class="md-nav__link">
        Integration Tests
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Tools
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tools" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Tools
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/device-provisioning/" class="md-nav__link">
        LoRa device provisioning CLI
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Decision Log
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Decision Log" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Decision Log
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../001_region_cn470_implementation/" class="md-nav__link">
        001. Region CN470 implementation
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          002. LoRa Basic Station configuration endpoint implementation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        002. LoRa Basic Station configuration endpoint implementation
      </a>
      
        


<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview-problem-statement" class="md-nav__link">
    Overview / Problem Statement
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#restrictions-limitations" class="md-nav__link">
    Restrictions / limitations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#possible-solutions" class="md-nav__link">
    Possible solutions
  </a>
  
    <nav class="md-nav" aria-label="Possible solutions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#option-1-mount-volume-on-lns-with-the-lbs-configuration" class="md-nav__link">
    Option 1: Mount volume on LNS with the LBS configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-2-hold-lbs-configurations-in-the-lns-module-twin" class="md-nav__link">
    Option 2: Hold LBS configurations in the LNS module twin
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-3-track-each-lbs-as-separate-iot-hub-device" class="md-nav__link">
    Option 3: Track each LBS as separate IoT Hub device
  </a>
  
    <nav class="md-nav" aria-label="Option 3: Track each LBS as separate IoT Hub device">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lns-uses-the-azure-function-to-retrieve-the-device-key" class="md-nav__link">
    LNS uses the Azure Function to retrieve the device key
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative-1-utilize-the-child-parent-feature-to-avoid-invoking-additional-azure-services" class="md-nav__link">
    Alternative 1: utilize the child-parent feature to avoid invoking additional Azure services
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative-2-edge-enabled-lbs-sends-upstream-its-twin-to-lns" class="md-nav__link">
    Alternative 2: edge-enabled LBS sends upstream its twin to LNS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#decision" class="md-nav__link">
    Decision
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../003_documentation/" class="md-nav__link">
        003. Documentation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../004_region_as923_implementation/" class="md-nav__link">
        004. Region AS923 implementation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../005_observability/" class="md-nav__link">
        005 - Observability
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../006_cups/" class="md-nav__link">
        006. CUPS Protocol Implementation - Credential management
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          About
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="About" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          About
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../issues/" class="md-nav__link">
        Known Issues
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../support/" class="md-nav__link">
        Support
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/" class="md-nav__link">
        Contributing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../license/" class="md-nav__link">
        License
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview-problem-statement" class="md-nav__link">
    Overview / Problem Statement
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#restrictions-limitations" class="md-nav__link">
    Restrictions / limitations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#possible-solutions" class="md-nav__link">
    Possible solutions
  </a>
  
    <nav class="md-nav" aria-label="Possible solutions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#option-1-mount-volume-on-lns-with-the-lbs-configuration" class="md-nav__link">
    Option 1: Mount volume on LNS with the LBS configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-2-hold-lbs-configurations-in-the-lns-module-twin" class="md-nav__link">
    Option 2: Hold LBS configurations in the LNS module twin
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-3-track-each-lbs-as-separate-iot-hub-device" class="md-nav__link">
    Option 3: Track each LBS as separate IoT Hub device
  </a>
  
    <nav class="md-nav" aria-label="Option 3: Track each LBS as separate IoT Hub device">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lns-uses-the-azure-function-to-retrieve-the-device-key" class="md-nav__link">
    LNS uses the Azure Function to retrieve the device key
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative-1-utilize-the-child-parent-feature-to-avoid-invoking-additional-azure-services" class="md-nav__link">
    Alternative 1: utilize the child-parent feature to avoid invoking additional Azure services
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative-2-edge-enabled-lbs-sends-upstream-its-twin-to-lns" class="md-nav__link">
    Alternative 2: edge-enabled LBS sends upstream its twin to LNS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#decision" class="md-nav__link">
    Decision
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/Azure/iotedge-lorawan-starterkit/edit/docs/main/docs/adr/002_lbs_configuration.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="002-lora-basic-station-configuration-endpoint-implementation">002. LoRa Basic Station configuration endpoint implementation</h1>
<p>Milestone / Epic: <a href="https://github.com/Azure/iotedge-lorawan-starterkit/issues/388">#388</a></p>
<p>Authors: Bastian Burger, Spyros Giannakakis</p>
<h2 id="overview-problem-statement">Overview / Problem Statement</h2>
<p>The <a href="https://lora-developers.semtech.com/build/software/lora-basics/lora-basics-for-gateways/?url=tcproto.html">LNS protocol</a> specifies an endpoint that the LoRa Basic Station (LBS) invokes an
endpoint on the LNS to load its configuration. After a successful configuration exchange, the
LBS/LNS start to operate normally. From the <a href="https://lora-developers.semtech.com/build/software/lora-basics/lora-basics-for-gateways/?url=tcproto.html">protocol specification</a></p>
<blockquote>
<p>Right after the WebSocket connection has been established, the Station sends a <code>version</code> message.
Next, the LNS shall respond with a <code>router_config</code> message. Afterwards, normal operation begins
with uplink/downlink messages as described below.</p>
</blockquote>
<p>As part of this ADR we describe how the LNS can provide the LBS with the necessary configuration. We
analyze different strategies with respect to their implementation simplicity, deployment simplicity
and how to detect updates to the configuration.</p>
<h2 id="restrictions-limitations">Restrictions / limitations</h2>
<ul>
<li>Twins have a limit of 32KB for desired properties.</li>
<li><a href="https://docs.microsoft.com/en-us/azure/iot-edge/iot-edge-as-gateway?view=iotedge-2020-11#parent-and-child-relationships">Children
  devices</a>
  can only have one parent and a parent can have up to 100 children devices.</li>
</ul>
<h2 id="possible-solutions">Possible solutions</h2>
<h3 id="option-1-mount-volume-on-lns-with-the-lbs-configuration">Option 1: Mount volume on LNS with the LBS configuration</h3>
<p>Since the LNS runs as an IoT edge module, we can <a href="https://docs.microsoft.com/en-us/azure/iot-edge/how-to-access-host-storage-from-module?view=iotedge-2020-11">use IoT Edge device local storage from a
module</a>.
We would store the configuration of all LBSs in the file system of the LNS.</p>
<p><em>Advantages</em>:</p>
<ul>
<li>Implementation effort is low.</li>
<li>No limitation in terms of how many LBSs can connect to an LNS.</li>
</ul>
<p><em>Disadvantages</em>:</p>
<ul>
<li>An additional configuration mechanism besides the IoT Hub is introduced to the system. This would
  complicate the provisioning flow and potentially require the involvement of a separate infra team.</li>
<li>Deployment of updated configuration is not straightforward, since for configuration updates we
  need access to the file system of where the LNS is hosted. To check if the configuration changed,
  we would also need to query the configuration file(s) periodically to detect changes and apply updates.</li>
</ul>
<h3 id="option-2-hold-lbs-configurations-in-the-lns-module-twin">Option 2: Hold LBS configurations in the LNS module twin</h3>
<p>Adding the configuration to the module twin of the LNS would make it possible to update the LBS
configuration (e.g. adding new gateways, changing existing values) by adapting the module twin of
the LNS. Since device twins have a <a href="https://docs.microsoft.com/en-us/azure/iot-hub/iot-hub-devguide-device-twins#device-twin-size">32kb size limit for desired
properties</a>,
this means that we will have an effective limitation in terms of how many LBS we can connect to a
single LNS. The device twin documentation states the following about the encoding of the twin
desired properties:</p>
<ul>
<li>Property key is encoded as UTF-8-encoded string (usually one character takes 8 bytes)</li>
<li>Boolean value takes 4 bytes</li>
<li>Numeric value takes 8 bytes</li>
<li>Nested object size is based on their content</li>
</ul>
<p>Taking as an example the configuration message from <a href="https://github.com/Azure/iotedge-lorawan-starterkit/pull/569">PR
569</a>, we are able to add <strong>37</strong> times
the following LBS configuration to the device twins desired properties until we get an error:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="nt">&quot;msgtype&quot;</span><span class="p">:</span><span class="s2">&quot;router_config&quot;</span><span class="p">,</span><span class="nt">&quot;NetID&quot;</span><span class="p">:[</span><span class="mi">1</span><span class="p">],</span><span class="nt">&quot;JoinEui&quot;</span><span class="p">:[</span><span class="s2">&quot;9223372036854775807&quot;</span><span class="p">,</span><span class="s2">&quot;9223372036854775807&quot;</span><span class="p">],</span><span class="nt">&quot;region&quot;</span><span class="p">:</span><span class="s2">&quot;EU863&quot;</span><span class="p">,</span><span class="nt">&quot;hwspec&quot;</span><span class="p">:</span><span class="s2">&quot;sx1301/1&quot;</span><span class="p">,</span><span class="nt">&quot;freq_range&quot;</span><span class="p">:[</span><span class="mi">863000000</span><span class="p">,</span><span class="mi">870000000</span><span class="p">],</span><span class="nt">&quot;DRs&quot;</span><span class="p">:[[</span><span class="mi">11</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">10</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">9</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">8</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">7</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">7</span><span class="p">,</span><span class="mi">250</span><span class="p">,</span><span class="mi">0</span><span class="p">]],</span><span class="nt">&quot;sx1301_conf&quot;</span><span class="p">:[{</span><span class="nt">&quot;radio_0&quot;</span><span class="p">:{</span><span class="nt">&quot;enable&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="nt">&quot;freq&quot;</span><span class="p">:</span><span class="mi">867500000</span><span class="p">},</span><span class="nt">&quot;radio_1&quot;</span><span class="p">:{</span><span class="nt">&quot;enable&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="nt">&quot;freq&quot;</span><span class="p">:</span><span class="mi">868500000</span><span class="p">},</span><span class="nt">&quot;chan_FSK&quot;</span><span class="p">:{</span><span class="nt">&quot;enable&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="nt">&quot;radio&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="nt">&quot;if&quot;</span><span class="p">:</span><span class="mi">300000</span><span class="p">},</span><span class="nt">&quot;chan_Lora_std&quot;</span><span class="p">:{</span><span class="nt">&quot;enable&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="nt">&quot;radio&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="nt">&quot;if&quot;</span><span class="p">:</span><span class="mi">-200000</span><span class="p">,</span><span class="nt">&quot;bandwidth&quot;</span><span class="p">:</span><span class="mi">250000</span><span class="p">,</span><span class="nt">&quot;spread_factor&quot;</span><span class="p">:</span><span class="mi">7</span><span class="p">},</span><span class="nt">&quot;chan_multiSF_0&quot;</span><span class="p">:{</span><span class="nt">&quot;enable&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="nt">&quot;radio&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="nt">&quot;if&quot;</span><span class="p">:</span><span class="mi">-400000</span><span class="p">},</span><span class="nt">&quot;chan_multiSF_1&quot;</span><span class="p">:{</span><span class="nt">&quot;enable&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="nt">&quot;radio&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="nt">&quot;if&quot;</span><span class="p">:</span><span class="mi">-200000</span><span class="p">},</span><span class="nt">&quot;chan_multiSF_2&quot;</span><span class="p">:{</span><span class="nt">&quot;enable&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="nt">&quot;radio&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="nt">&quot;if&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">},</span><span class="nt">&quot;chan_multiSF_3&quot;</span><span class="p">:{</span><span class="nt">&quot;enable&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="nt">&quot;radio&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="nt">&quot;if&quot;</span><span class="p">:</span><span class="mi">-400000</span><span class="p">},</span><span class="nt">&quot;chan_multiSF_4&quot;</span><span class="p">:{</span><span class="nt">&quot;enable&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="nt">&quot;radio&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="nt">&quot;if&quot;</span><span class="p">:</span><span class="mi">-200000</span><span class="p">},</span><span class="nt">&quot;chan_multiSF_5&quot;</span><span class="p">:{</span><span class="nt">&quot;enable&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="nt">&quot;radio&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="nt">&quot;if&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">},</span><span class="nt">&quot;chan_multiSF_6&quot;</span><span class="p">:{</span><span class="nt">&quot;enable&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="nt">&quot;radio&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="nt">&quot;if&quot;</span><span class="p">:</span><span class="mi">200000</span><span class="p">},</span><span class="nt">&quot;chan_multiSF_7&quot;</span><span class="p">:{</span><span class="nt">&quot;enable&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="nt">&quot;radio&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="nt">&quot;if&quot;</span><span class="p">:</span><span class="mi">400000</span><span class="p">}}],</span><span class="nt">&quot;nocca&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="nt">&quot;nodc&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="nt">&quot;nodwell&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">}</span>
</code></pre></div>
<p>Assuming that we do not choose a different representation (e.g. compression, sharing of duplicated
parts of the document) we can safely guarantee that we support 30 gateways per network server with
this approach.</p>
<p><em>NB</em>:</p>
<ul>
<li>In case the specification requires us to transfer 64-bit numbers (e.g. for EUIs), we either need
  to split up such a number into two 32-bit numbers or represent it as a string. Device twins encode
  numbers as 32-bit values.</li>
</ul>
<p><em>Advantages</em>:</p>
<ul>
<li>We can fetch the LBS configuration needing to have access to the contentrator device key (as in
  Option 3).</li>
<li>No need to create additional IoT devices for each LBS.</li>
<li>Configuration of all LBSs is centralized in one place which would make it easier to find.</li>
</ul>
<p><em>Disadvantages</em>:</p>
<ul>
<li>The centralization of configuration complicates the changes needed to connect to other or multiple
  LNSs (for dynamic discovery or resiliency purposes)</li>
<li>The limit of ~30 LBSs per LNS is considered enough for now (initially we considered 4-5 LBSs per
  LNS) but could be limiting in the future especially if the twins grow.</li>
<li>Workarounds can be considered e.g. use this space only for non-default LBSs or potentially compress.</li>
</ul>
<h3 id="option-3-track-each-lbs-as-separate-iot-hub-device">Option 3: Track each LBS as separate IoT Hub device</h3>
<p>In this option, we create IoT Hub devices (not edge-enabled) for every LBS. The configuration of LBS
is held in the device twin.</p>
<p><em>Open question</em>:</p>
<ul>
<li>Do we allow an LNS to get info for any LBS or only for the ones that are connected to it?</li>
</ul>
<h4 id="lns-uses-the-azure-function-to-retrieve-the-device-key">LNS uses the Azure Function to retrieve the device key</h4>
<ul>
<li>LBS requests its configuration passing its device id.</li>
<li>LNS invokes the existing Azure Function to get the Device key passing the LBS id.</li>
<li>The Function returns the Device Key (via a cache or by querying IoT Hub).</li>
<li>LNS uses the Device Key to impersonate LBS, get its twin that holds the configuration (optionally: listens to
  future updates to it by <code>DeviceClient.SetDesiredPropertyUpdateCallbackAsync</code>).</li>
</ul>
<p>Notes: Code changes are not extensive, as most of the code change is already there</p>
<p><em>Advantages</em>:</p>
<ul>
<li>LBSs are self-contained and therefore can be moved more easily for example to a different LNS (discovery
  phase) or connect to more than one LNS (resiliency).</li>
</ul>
<p><em>Disadvantages</em>:</p>
<ul>
<li>We would need to provision and manage IoT devices for LBSs.</li>
<li>More complex LNS flow since it involves the Function.</li>
<li>Possible delay, though there is no timeout window within which we need to respond.</li>
<li>Multiple open connections are required for each LBS.</li>
</ul>
<h4 id="alternative-1-utilize-the-child-parent-feature-to-avoid-invoking-additional-azure-services">Alternative 1: utilize the child-parent feature to avoid invoking additional Azure services</h4>
<p>By establishing a <a href="https://docs.microsoft.com/en-us/azure/iot-edge/iot-edge-as-gateway?view=iotedge-2020-11#parent-and-child-relationships">child-parent
relationship</a>
between LBSs and LNS, messages from and to LBS are passed transparently through the LNS. The idea
here would be that LNS as the parent, has access to the LBS device twin <strong>without</strong> the need to use
the LBS device key.</p>
<p>Reason for disqualifying: There seems that there is no API in either the
<a href="https://docs.microsoft.com/en-us/dotnet/api/microsoft.azure.devices.client.deviceclient?view=azure-dotnet">DeviceClient</a>
nor the
<a href="https://docs.microsoft.com/en-us/dotnet/api/microsoft.azure.devices.client.moduleclient?view=azure-dotnet">ModuleClient</a>
to retrieve the device twin of a child without having the device key.</p>
<h4 id="alternative-2-edge-enabled-lbs-sends-upstream-its-twin-to-lns">Alternative 2: edge-enabled LBS sends upstream its twin to LNS</h4>
<p>If LBS was an IoT Edge enabled device, we could utilize
<code>ModuleClient.SetDesiredPropertyUpdateCallbackAsync</code> to send upstream to its parent the updated
module twin. LNS could filter messages coming from downstream/child devices based on whether they contain
a module id or not to get a hold of this configuration.  </p>
<p>Reason for disqualifying: Given that LBS needs to run on low powered devices, we can not change them to IoT Edge enabled devices.</p>
<h2 id="decision">Decision</h2>
<p>Based on this investigation and the team discussion, <a href="#option-3-track-each-lbs-as-separate-iot-hub-device">Option
3</a> was chosen due to the flexibility it offers
in terms of use-cases (resiliency, dynamic discovery) as well as scaling options. The additional
complexity is deemed reasonable given the additional future-proofness.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../001_region_cn470_implementation/" class="md-footer__link md-footer__link--prev" aria-label="Previous: 001. Region CN470 implementation" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              001. Region CN470 implementation
            </div>
          </div>
        </a>
      
      
        
        <a href="../003_documentation/" class="md-footer__link md-footer__link--next" aria-label="Next: 003. Documentation" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              003. Documentation
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
            Material for MkDocs
          </a>
        
        
      </div>
      
  <div class="md-footer-social">
    
      
      
      <a href="https://github.com/Azure/iotedge-lorawan-starterkit" target="_blank" rel="noopener" title="iotedge-lorawan-starterkit on GitHub" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.top", "navigation.tracking", "search.suggest", "search.highlight"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.fcfe8b6d.min.js", "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.b1047164.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
      
    
  </body>
</html>